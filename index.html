<html>
	<head >
		<title>WebGL - Canvas test</title>
		<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
		
		<script type="text/javascript" src="js/glMatrix.js"></script>
		<script type="text/javascript" src="js/callbacks.js"></script>
		<script type="text/javascript" src="js/glCourseBasis.js"></script>
		<script type="text/javascript" src="js/objLoader.js"></script>

		<script type="text/javascript" src="js/ihm.js"></script>

		<link rel="stylesheet" href="./ihm.css" />
		
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


	</head>

	<body onload="webGLStart();">
		<table>
			<tr>
				<td>
					<!-- ZONE DE DESSIN-->
					<canvas id="WebGL-test" style="border:none;" width="800" height="600"></canvas>
				</td>
				<td>
					<!-- ZONE DE PARAMETRAGE -->
					<form>
						<fieldset>
							<legend> Parametrage du materiau </legend>

							<label for="mix"> Type de materiel : </label>
							<select name="mix" id="mix" onchange="updateUI(value)">
								<option value="0"  selected=true onclick="MATERIAL.mix = value;"> mirroir parfait </option>
								<option value="1"  selected=false onclick="MATERIAL.mix = value;"> transparence parfaite </option>
								<option value="2"  selected=false onclick="MATERIAL.mix = value;"> transparence + mirroir fresnel </option>
								<option value="3"  selected=false onclick="MATERIAL.mix = value;"> mirroir coloré par texture </option>
								<option value="4"  selected=false onclick="MATERIAL.mix = value;"> mirroir parfait avec bump </option>
								<option value="5"  selected=false onclick="MATERIAL.mix = value;"> BRDF simple </option>
								
								<option value="10" selected=false onclick="MATERIAL.mix = value;"> mirroir parfait depoli (sampling) </option>
								<option value="11" selected=false onclick="MATERIAL.mix = value;"> transparence parfaite depolie (sampling) </option>
								<option value="12" selected=false onclick="MATERIAL.mix = value;"> transparence + mirroir fresnel depoli (sampling) </option>
								<option value="13" selected=false onclick="MATERIAL.mix = value;"> mirroir + normal depoli </option>
								<option value="14"  selected=false onclick="MATERIAL.mix = value;"> BRDF (sampling)</option>
							</select>

							<fieldset id="divTextures">
								<legend> Textures </legend>
								<label for="TextureColor"> Couleur : </label>
								<input type="checkbox" name="TextureColor" id="TextureColor" onclick="MATERIAL.updateIsTextureColor(value)">
								<br>
								<label for="TextureRoughness"> Rugausité : </label>
								<input type="checkbox" name="TextureRoughness" id="TextureRoughness" onclick="MATERIAL.updateIsTextureRoughness(value)">
								<br>
								<label for="TextureNormal"> Normale : </label>
								<input type="checkbox" name="TextureNormal" id="TextureNormal" onclick="MATERIAL.updateIsTextureNormal(value)">
								<br>
								<label for="TextureAO"> Ambiante occlusion : </label>
								<input type="checkbox" name="TextureAO" id="TextureAO" onclick="MATERIAL.updateIsTextureAO(value)">
								<br>
							</fieldset>

							<br>
							<label for="Kd">Kd : </label><br>
							<input type="color" id="Kd" name="Kd" value="#ffffff" oninput="MATERIAL.Kd = convertRGBA(value)">
							<br>
							
							<div id="divSigma">
								<label for="Sigma">Sigma/Roughness : </label><br>
								<input type="range" step="0.01" id="sigma" name="sigma" min="0" max="1" value="0.2" oninput="MATERIAL.sigma = Number(value); this.nextElementSibling.value = this.value">
								<input type="number" step="0.01" min="0" max="1" value="0.2" oninput="MATERIAL.sigma = Number(value); this.previousElementSibling.value = this.value"/>
								<br>
							</div>
							

							<div id="divNi">
								<label for="Ni">indice du milieu (Ni)</label> <br>
								<input type="range" step="0.01" id="Ni" name="Ni" min="1" max="5" value="1.3" oninput="MATERIAL.Ni = Number(value); this.nextElementSibling.value = this.value">
								<input type="number" step="0.01" min="1" max="5" value="1.3" oninput="MATERIAL.Ni = Number(value); this.previousElementSibling.value = this.value"/>	
								<br>	
								<br>
							</div>
						</fieldset>

						<fieldset>
							<legend> Parametres de rendu  </legend>
							<label for="mode"> Mode : </label>
							<select name="mode" id="mode">
								<option value=0 selected=true onclick="MATERIAL.uDistrib = value;"> Ggx </option>
								<option value=1 onclick="MATERIAL.uDistrib = value;"> Beckman </option>
							</select>

							<br>

							
							<label for="sample">Nombre d'echantillon :  </label><br>
							<input type="number" step="1"  id="sample" min="0" value="3" oninput="MATERIAL.sample = value;">
							<br>

							<label for="sample">Ambiente Occlusion Factor :  </label><br>
							<input type="number" step="0.1"  id="sample" min="0" value="1" oninput="MATERIAL.factor = value;">
							<br>
						</fieldset>


						<fieldset> 
							<legend> Parametrage de la scene   </legend>
							<label for="skymap">Choix de la skymap : </label>
							<select name="skymap" id="skymap">
								<option value="Yokohama"  onclick="CUBEMAP.cubemapName = value; CUBEMAP.initAll()"> Yokohama </option>
								<option value="Areskutan" onclick="CUBEMAP.cubemapName = value ; CUBEMAP.initAll() "> Areskutan </option>
								<option value="FortPoint" onclick="CUBEMAP.cubemapName = value ; CUBEMAP.initAll()" > FortPoint </option>
								<option value="Lycksele" selected=true onclick="CUBEMAP.cubemapName = value ; CUBEMAP.initAll()"  > Lycksele </option>
								<option value="Tantolunden" onclick="CUBEMAP.cubemapName = value ; CUBEMAP.initAll()"> Tantolunden </option>
							</select>

							<br>

							<label for="obj3D"> Objet dans la scene : </label>
							<select name="obj3D" id="obj3D">
								<option value="sphere_2" onclick="changeObj(value)"> sphere </option>
								<option value="cube" onclick="changeObj(value)"> cube </option>
								<option value="mustang" onclick="changeObj(value)"> mustang </option>
								<option value="porsche" onclick="changeObj(value)"> porsche</option>
								<option value="bunny" onclick="changeObj(value)"> bunny </option>
							</select>

							<br>

							<legend> </legend>
							

						</fieldset>


					</form>
				</td>
			</tr>
		</table>

	</body>
</html>